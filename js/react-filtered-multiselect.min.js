/*!
 * react-filtered-multiselect 0.4.2 - https://github.com/insin/react-filtered-multiselect
 * MIT Licensed
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.FilteredMultiSelect=t(require("react")):e.FilteredMultiSelect=t(e.React)}(this,function(e){return function(e){function t(i){if(s[i])return s[i].exports;var l=s[i]={exports:{},id:i,loaded:!1};return e[i].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var s={};return t.m=e,t.c=s,t.p="",t(0)}([function(e,t,s){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){for(var s={},i=0,l=e.length;l>i;i++)t?s[e[i][t]]=!0:s[e[i]]=!0;return s}function o(e,t,s){for(var i=[],o=0,r=l(s),n=0,a=e.length,p=s.length;a>n&&p>o;n++)r[e[n][t]]&&(i.push(e[n]),o++);return i}Object.defineProperty(t,"__esModule",{value:!0});var r=s(1),n=i(r),a={button:"FilteredMultiSelect__button",buttonActive:"FilteredMultiSelect__button--active",filter:"FilteredMultiSelect__filter",select:"FilteredMultiSelect__select"};t.default=n.default.createClass({displayName:"FilteredMultiSelect",propTypes:{onChange:r.PropTypes.func.isRequired,options:r.PropTypes.array.isRequired,buttonText:r.PropTypes.string,className:r.PropTypes.string,classNames:r.PropTypes.object,defaultFilter:r.PropTypes.string,disabled:r.PropTypes.bool,placeholder:r.PropTypes.string,selectedOptions:r.PropTypes.array,size:r.PropTypes.number,textProp:r.PropTypes.string,valueProp:r.PropTypes.string},getDefaultProps:function(){return{buttonText:"Select",className:"FilteredMultiSelect",classNames:{},defaultFilter:"",disabled:!1,placeholder:"type to filter",size:6,selectedOptions:[],textProp:"text",valueProp:"value"}},getInitialState:function(){var e=this.props,t=e.defaultFilter,s=e.selectedOptions;return{filter:t,filteredOptions:this._filterOptions(t,s),selectedValues:[]}},componentWillReceiveProps:function(e){(e.options!==this.props.options||e.selectedOptions!==this.props.selectedOptions||e.options.length!==this.props.options.length||e.selectedOptions.length!==this.props.selectedOptions.length)&&this.setState({filteredOptions:this._filterOptions(this.state.filter,e.selectedOptions,e.options)},this._updateSelectedValues)},_getClassName:function(e){for(var t=[this.props.classNames[e]||a[e]],s=arguments.length,i=Array(s>1?s-1:0),l=1;s>l;l++)i[l-1]=arguments[l];for(var o=0,r=i.length;r>o;o++)i[o]&&t.push(this.props.classNames[i[o]]||a[i[o]]);return t.join(" ")},_filterOptions:function(e,t,s){"undefined"==typeof e&&(e=this.state.filter),"undefined"==typeof t&&(t=this.props.selectedOptions),"undefined"==typeof s&&(s=this.props.options),e=e.toUpperCase();for(var i=this.props,o=i.textProp,r=i.valueProp,n=l(t,r),a=[],p=0,u=s.length;u>p;p++)n[s[p][r]]||e&&-1===s[p][o].toUpperCase().indexOf(e)||a.push(s[p]);return a},_onFilterChange:function(e){var t=e.target.value;this.setState({filter:t,filteredOptions:this._filterOptions(t)},this._updateSelectedValues)},_onFilterKeyPress:function(e){var t=this;"Enter"===e.key&&(e.preventDefault(),1===this.state.filteredOptions.length&&!function(){var e=t.state.filteredOptions[0],s=t.props.selectedOptions.concat([e]);t.setState({filter:"",selectedValues:[]},function(){t.props.onChange(s)})}())},_updateSelectedValues:function(e){for(var t=e?e.target:this.refs.select,s=[],i=0,l=t.options.length;l>i;i++)t.options[i].selected&&s.push(t.options[i].value);(e||String(this.state.selectedValues)!==String(s))&&this.setState({selectedValues:s})},_addSelectedToSelection:function(e){var t=this,s=this.props.selectedOptions.concat(o(this.state.filteredOptions,this.props.valueProp,this.state.selectedValues));this.setState({selectedValues:[]},function(){t.props.onChange(s)})},render:function(){var e=this.state,t=e.filter,s=e.filteredOptions,i=e.selectedValues,l=this.props,o=l.className,r=l.disabled,a=l.placeholder,p=l.size,u=l.textProp,c=l.valueProp,d=i.length>0;return n.default.createElement("div",{className:o},n.default.createElement("input",{type:"text",className:this._getClassName("filter"),placeholder:a,value:t,onChange:this._onFilterChange,onKeyPress:this._onFilterKeyPress,disabled:r}),n.default.createElement("select",{multiple:!0,ref:"select",className:this._getClassName("select"),size:p,value:i,onChange:this._updateSelectedValues,onDoubleClick:this._addSelectedToSelection,disabled:r},s.map(function(e){return n.default.createElement("option",{key:e[c],value:e[c]},e[u])})),n.default.createElement("button",{type:"button",className:this._getClassName("button",d&&"buttonActive"),disabled:!d,onClick:this._addSelectedToSelection},this.props.buttonText))}}),e.exports=t.default},function(t,s){t.exports=e}])});